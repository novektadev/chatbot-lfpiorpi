const _0x26dae0=_0x3de1;(function(_0x557156,_0xe905d0){const _0x29f4e1=_0x3de1,_0x1ef3bc=_0x557156();while(!![]){try{const _0x4b8658=parseInt(_0x29f4e1(0xfe))/0x1*(-parseInt(_0x29f4e1(0x132))/0x2)+parseInt(_0x29f4e1(0x126))/0x3*(parseInt(_0x29f4e1(0x14a))/0x4)+-parseInt(_0x29f4e1(0x112))/0x5*(parseInt(_0x29f4e1(0x116))/0x6)+-parseInt(_0x29f4e1(0x10f))/0x7+parseInt(_0x29f4e1(0x11b))/0x8*(-parseInt(_0x29f4e1(0x117))/0x9)+-parseInt(_0x29f4e1(0xf5))/0xa*(parseInt(_0x29f4e1(0x13f))/0xb)+-parseInt(_0x29f4e1(0x14b))/0xc*(-parseInt(_0x29f4e1(0x127))/0xd);if(_0x4b8658===_0xe905d0)break;else _0x1ef3bc['push'](_0x1ef3bc['shift']());}catch(_0x45321d){_0x1ef3bc['push'](_0x1ef3bc['shift']());}}}(_0x52e2,0x1e9e9));import{bagOfWords,documentAsTree,stopWords,contextModel,loadBagOfWords,loadDocumentAsTree,loadStopWords,loadContextModel}from'./readModelData.min.js';function _0x3de1(_0x4503bc,_0x421c7b){const _0x52e2f9=_0x52e2();return _0x3de1=function(_0x3de140,_0x107000){_0x3de140=_0x3de140-0xf3;let _0x227f7c=_0x52e2f9[_0x3de140];return _0x227f7c;},_0x3de1(_0x4503bc,_0x421c7b);}async function displayDocumentTree(){const _0x598887=_0x3de1;!documentAsTree&&(console[_0x598887(0xf7)](_0x598887(0x135)),await loadDocumentAsTree());if(documentAsTree)for(const [_0x293ea2,_0x36d5ad]of Object[_0x598887(0x122)](documentAsTree)){const _0x532a39=_0x293ea2,_0x4a1d9f=_0x36d5ad;if(_0x4a1d9f){const _0x1aec56=_0x4a1d9f[_0x598887(0x133)],_0x3d9dd0=_0x4a1d9f[_0x598887(0x113)];}}else console[_0x598887(0xfa)](_0x598887(0x14d));}const calculateSimilarity=(_0x384b5d,_0x435537)=>{const _0x4172fe=_0x3de1,_0x5c532f=_0x384b5d['toLowerCase']()['split'](/\s+/),_0x3e7ffa=_0x5c532f[_0x4172fe(0x148)];if(_0x3e7ffa===0x0)return 0x0;const _0x1d5e09=_0x5c532f[_0x4172fe(0x123)]((_0x16d424,_0x47b9fe)=>_0x16d424+(_0x435537[_0x47b9fe]||0x0),0x0);return _0x1d5e09/_0x3e7ffa;};async function evaluateContext(_0x33223a){const _0x581884=_0x3de1;let _0x3e5153=[];const _0x35826f=(_0x4e8c39,_0x491bb8)=>{const _0x7fa3d1=_0x3de1,_0x5f27fd=_0x4e8c39[_0x7fa3d1(0x148)];if(_0x5f27fd===0x0)return 0x0;const _0x31a718=_0x4e8c39['reduce']((_0x23216d,_0x3ad69f)=>_0x23216d+(_0x491bb8[_0x3ad69f]||0x0),0x0);return _0x31a718/_0x5f27fd;};!contextModel&&(console[_0x581884(0xf7)](_0x581884(0x12f)),await loadContextModel());if(contextModel)for(const _0x9af6ea of contextModel){if(_0x9af6ea&&Array['isArray'](_0x9af6ea[_0x581884(0x130)]))for(const _0x35fe48 of _0x9af6ea[_0x581884(0x130)]){const _0x1b5af1=_0x35fe48[_0x581884(0x120)],_0x5cae45=_0x35fe48[_0x581884(0x119)],_0x27ed93=_0x35826f(_0x33223a,_0x5cae45);if(_0x27ed93>0x0){const _0x4c736f={'pathName':_0x9af6ea[_0x581884(0x12e)],'chunkId':_0x1b5af1,'score':_0x27ed93};_0x3e5153[_0x581884(0x11a)](_0x4c736f);}}}else console[_0x581884(0xfa)](_0x581884(0x14d));return _0x3e5153;}async function getVectorToSearch(_0x5b661e){const _0x22606a=_0x3de1,_0xb0d74=/[\u0300-\u036f]/g,_0x534d3f=/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,_0x1ddf9f=/\s+/g,_0x48c0ad=_0x5b661e[_0x22606a(0x118)]()['normalize']('NFD')[_0x22606a(0x124)](_0xb0d74,''),_0x3cefbe=_0x48c0ad[_0x22606a(0x118)]()[_0x22606a(0x124)](_0x534d3f,'\x20'),_0x10ba08=_0x3cefbe[_0x22606a(0x124)](_0x1ddf9f,'\x20')[_0x22606a(0xf4)](),_0x20ff87=_0x10ba08[_0x22606a(0xf8)]('\x20')['filter'](Boolean);!stopWords&&await loadStopWords();if(stopWords){let _0x36275f=[];const _0x35da0b=new Set(stopWords);_0x36275f[_0x22606a(0x11a)](..._0x20ff87[_0x22606a(0x108)](_0x1641cc=>!_0x35da0b[_0x22606a(0x107)](_0x1641cc)));if(_0x36275f[_0x22606a(0x148)]>=0x1){!bagOfWords&&await loadBagOfWords();if(bagOfWords){let _0xa7b210=[];const _0x447a9b=Object['keys'](bagOfWords),_0x2d9a24=new Set(_0x447a9b);return _0xa7b210[_0x22606a(0x11a)](..._0x36275f[_0x22606a(0x108)](_0x67641a=>_0x2d9a24['has'](_0x67641a))),_0xa7b210[_0x22606a(0x148)]>=0x1?_0xa7b210:null;}}}}async function getRelatedLeafs(_0x2d6e8b,_0x1b321c){const _0x119732=_0x3de1;let _0xfbdb57=null;const _0x2e0a20=await evaluateContext(_0x2d6e8b);if(_0x2e0a20){const _0xd5d5e9={};for(const _0x33fe32 of _0x2e0a20){const _0x2232bf=_0x33fe32[_0x119732(0x12e)];!_0xd5d5e9[_0x2232bf]&&(_0xd5d5e9[_0x2232bf]={'chunksIds':new Set(),'totalScore':0x0,'entryCount':0x0,'maxScore':-Infinity});const _0x272467=_0xd5d5e9[_0x2232bf];!_0x272467['chunksIds']['has'](_0x33fe32[_0x119732(0x120)])&&(_0x272467[_0x119732(0x11d)]['add'](_0x33fe32[_0x119732(0x120)]),_0x272467[_0x119732(0x100)]+=_0x33fe32['score'],_0x272467['entryCount']++,_0x33fe32['score']>_0x272467[_0x119732(0x11c)]&&(_0x272467[_0x119732(0x11c)]=_0x33fe32['score']));}const _0x194d9a=Object[_0x119732(0x122)](_0xd5d5e9)[_0x119732(0xf6)](([_0x217722,_0x17df02])=>{const _0x5074de=_0x119732,_0x4b1e35=_0x17df02[_0x5074de(0x100)]/_0x17df02[_0x5074de(0x121)],_0x548ca3=_0x17df02[_0x5074de(0x11c)],_0x329ae3=(0x2*_0x548ca3+_0x4b1e35)/0x3;return{'pathName':_0x217722,'numChunks':_0x17df02['chunksIds']['size'],'avgScore':_0x4b1e35,'maxScore':_0x548ca3,'weightedAvg':_0x329ae3};});if(_0x194d9a){if(_0x194d9a[_0x119732(0x148)]>=0x1)return _0x194d9a[_0x119732(0x12c)]((_0x305001,_0x2926bd)=>{const _0x56e502=_0x119732;if(_0x2926bd['weightedAvg']!==_0x305001['weightedAvg'])return _0x2926bd['weightedAvg']-_0x305001[_0x56e502(0x10a)];return _0x2926bd[_0x56e502(0x13b)]-_0x305001[_0x56e502(0x13b)];}),_0xfbdb57=_0x194d9a['slice'](0x0,_0x1b321c),_0xfbdb57;}else return null;}else return null;}async function getResponsePaths(_0x37180e){const _0x97aeec=_0x3de1,_0x306773=[];let _0x5441fb=0x1;for(const _0x58eb52 of _0x37180e){let _0x5a2257=Array(0x8)[_0x97aeec(0x142)]('');const _0x16e9c9=_0x58eb52[_0x97aeec(0x12e)][_0x97aeec(0xf8)]('/');if(_0x16e9c9){for(let _0x2198ab=0x1;_0x2198ab<_0x16e9c9[_0x97aeec(0x148)];_0x2198ab++){_0x2198ab>0x1?_0x5a2257[_0x2198ab-0x1]=_0x5a2257[_0x2198ab-0x2]+'/'+_0x16e9c9[_0x2198ab]:_0x5a2257[_0x2198ab-0x1]='/'+_0x16e9c9[_0x2198ab];}_0x306773[_0x97aeec(0x11a)](_0x5a2257);}_0x5441fb+=0x1;}return _0x306773;}async function getHTMLResponse(_0x47d12e){const _0x5649ff=_0x3de1;if(_0x47d12e['length']>=0x1){let _0x4625ad='';for(let _0x36869e=0x0;_0x36869e<_0x47d12e[_0x5649ff(0x148)];_0x36869e++){for(let _0x4d4bbc=0x1;_0x4d4bbc<_0x47d12e[_0x36869e]['length'];_0x4d4bbc++){const _0x14f907=_0x47d12e[_0x36869e][_0x4d4bbc];if(_0x14f907!==''){let _0x23f5b0='',_0x28eb94='';const _0x169b5a=_0x14f907[_0x5649ff(0xf8)]('/'),_0x1376ac=_0x169b5a['at'](-0x1);!documentAsTree&&await loadDocumentAsTree();documentAsTree&&(_0x14f907 in documentAsTree&&(_0x28eb94=documentAsTree[_0x14f907][_0x5649ff(0x113)]));if(_0x1376ac!==_0x5649ff(0x13d)&&_0x1376ac!=='U')switch(_0x4d4bbc){case 0x1:_0x23f5b0='<h3><b>Capitulo\x20'+_0x1376ac+_0x5649ff(0x153)+_0x28eb94+_0x5649ff(0x11f);break;case 0x2:_0x23f5b0=_0x5649ff(0x14f)+_0x1376ac+'</b>\x20-\x20'+_0x28eb94+'</h4>\x0a';break;case 0x3:_0x23f5b0=_0x5649ff(0x150)+_0x1376ac+_0x5649ff(0x106)+_0x28eb94+_0x5649ff(0x149);break;case 0x4:_0x23f5b0=_0x5649ff(0x12d)+_0x1376ac+_0x5649ff(0x153)+_0x28eb94+_0x5649ff(0x149);break;case 0x5:_0x23f5b0='<p\x20style=\x22padding-left:40px;\x22><b>'+_0x1376ac+_0x5649ff(0x145)+_0x28eb94+_0x5649ff(0x109);break;case 0x6:_0x23f5b0='<p\x20style=\x22padding-left:60px;\x22><b>'+_0x1376ac+_0x5649ff(0x13c)+_0x28eb94+')</p>\x0a';break;default:_0x23f5b0=_0x28eb94+_0x5649ff(0x137);break;}else _0x1376ac===_0x5649ff(0x13d)&&(_0x23f5b0=_0x5649ff(0x152)+_0x28eb94+_0x5649ff(0x10b)),_0x1376ac=='U'&&(_0x23f5b0='\x0a');_0x4625ad+=_0x23f5b0;}}_0x4625ad+=_0x5649ff(0x129);}return _0x4625ad;}return null;}async function addMessageToChat(_0x400616,_0x3bb539){const _0x5c8282=_0x3de1;let _0x3eb11d='';const _0x4a54ad=document[_0x5c8282(0x154)](_0x5c8282(0x143));_0x3bb539==='user'&&(_0x3eb11d='<p><strong>usuario:</strong>\x20'+_0x400616+_0x5c8282(0x11e),_0x4a54ad[_0x5c8282(0x111)]=_0x5c8282(0x13a),_0x4a54ad[_0x5c8282(0x144)]=_0x5c8282(0x10e)),_0x3bb539===_0x5c8282(0x10c)&&(_0x3eb11d=_0x5c8282(0x101)+_0x400616,_0x4a54ad[_0x5c8282(0x111)]=_0x5c8282(0x128),_0x4a54ad[_0x5c8282(0x144)]=_0x5c8282(0x140)),_0x3bb539===_0x5c8282(0x155)&&(_0x3eb11d=_0x5c8282(0x115)+_0x400616+':</p>',_0x4a54ad[_0x5c8282(0x111)]='message-bubble\x20bot-message',_0x4a54ad['style']=_0x5c8282(0xf9)),_0x3bb539===_0x5c8282(0x110)&&(_0x3eb11d=_0x5c8282(0x115)+_0x400616+_0x5c8282(0x141),_0x4a54ad[_0x5c8282(0x111)]='message-bubble\x20bot-message',_0x4a54ad[_0x5c8282(0x144)]=_0x5c8282(0x104)),_0x4a54ad['innerHTML']=_0x3eb11d,chatContainer[_0x5c8282(0x14c)](_0x4a54ad),_0x4a54ad[_0x5c8282(0x136)]({'behavior':_0x5c8282(0x13e),'block':_0x5c8282(0x103)}),userInput['value']='';}async function sendMessage(){const _0x5bb9b1=_0x3de1,_0x26d234=userInput['value'][_0x5bb9b1(0xf4)]();if(_0x26d234!==''){const _0x38398d=await getVectorToSearch(_0x26d234);if(_0x38398d!==null){if(_0x38398d['length']>=0x3){addMessageToChat(_0x26d234,_0x5bb9b1(0x147));const _0x753fd3=document[_0x5bb9b1(0x10d)]('maxChunks'),_0x383bd0=await getRelatedLeafs(_0x38398d,_0x753fd3['value']),_0x2380b7=await getResponsePaths(_0x383bd0),_0x44e738=await getHTMLResponse(_0x2380b7);addMessageToChat(_0x44e738,_0x5bb9b1(0x10c));}else addMessageToChat(_0x5bb9b1(0x131),_0x5bb9b1(0x155)),userInput[_0x5bb9b1(0x134)]='';}else addMessageToChat(_0x5bb9b1(0xff)+_0x26d234+_0x5bb9b1(0xf3),_0x5bb9b1(0x110)),userInput['value']='';}}const currentTimeSpan=document[_0x26dae0(0x10d)]('currentTime');function updateLocalTime(){const _0x5a5787=_0x26dae0,_0x3fc922={'timeZone':_0x5a5787(0x14e),'hour':_0x5a5787(0xfc),'minute':_0x5a5787(0xfc),'second':_0x5a5787(0xfc),'hour12':!![]},_0x4d665f=new Date()[_0x5a5787(0x139)]('en-US',_0x3fc922);currentTimeSpan[_0x5a5787(0x151)]=_0x4d665f;}updateLocalTime(),setInterval(updateLocalTime,0x3e8);const chatContainer=document[_0x26dae0(0x10d)](_0x26dae0(0xfb)),userInput=document[_0x26dae0(0x10d)]('userInput'),sendButton=document[_0x26dae0(0x10d)]('sendButton'),typingIndicator=document[_0x26dae0(0x10d)](_0x26dae0(0x105)),maxChunksInput=document[_0x26dae0(0x10d)]('maxChunks'),queryExamples=document[_0x26dae0(0x102)]('.example-btn');function _0x52e2(){const _0x2f12d2=['typingIndicator','</b>:\x20','has','filter',')</p>\x0a','weightedAvg','}</i></p>\x0a','bot','getElementById','background-color:\x20#dddddd;\x20padding:\x200.75rem;\x20border-radius:\x200.5rem;\x20margin-bottom:\x200.5rem;','1319822TvHGiu','error','className','55PgFtRE','text','forEach','<p><strong>Agente:</strong>','20316CbKtaD','830475YKeJTA','toLowerCase','chunk','push','8suXuvZ','maxScore','chunksIds','</p>','\x20</h3>\x0a','chunkId','entryCount','entries','reduce','replace','query','35985rTTYEG','187213DINxTL','message-bubble\x20bot-message','<br>','key','click','sort','<p\x20style=\x22padding-left:20px;\x22><b>','pathName','Context\x20model\x20not\x20yet\x20loaded,\x20loading\x20now...','textChunks','Para\x20darte\x20mejores\x20resultados,\x20necesito\x20más\x20detalles\x20en\x20tu\x20pregunta.\x20Por\x20favor,\x20añade\x20un\x20poco\x20más\x20de\x20contexto','6826GlaElh','type','value','document\x20tree\x20not\x20yet\x20loaded,\x20loading\x20now...','scrollIntoView','}<br>\x0a','addEventListener','toLocaleTimeString','message-bubble\x20user-message','numChunks','</b>\x20\x0a','accion','smooth','176DAFvif','background-color:\x20#e6f7ff;\x20padding:\x200.75rem;\x20border-radius:\x200.5rem;\x20margin-bottom:\x200.5rem;',':</p>','fill','div','style','</b>\x20','Enter','user','length','</p>\x0a','28GvzBqB','540OuFrSg','appendChild','documentAsTree\x20is\x20not\x20available.','America/Mazatlan','<h4><b>Seccion\x20','<p><b>Articulo\x20','textContent','<p><i>','</b>\x20-\x20','createElement','warning','\x22</strong>,\x20no\x20esta\x20relacionada\x20con\x20los\x20alcances\x20de\x20este\x20chatbot','trim','133400jzuxeo','map','log','split','background-color:\x20#f8ed62;\x20padding:\x200.75rem;\x20border-radius:\x200.5rem;\x20margin-bottom:\x200.5rem;','warn','chatContainer','numeric','keypress','22Xhboim','Su\x20consula\x20\x22<strong>','totalScore','<p><strong>Agente:</strong>\x20\x20Con\x20fundamento\x20en:</p>\x0a','querySelectorAll','end','background-color:\x20#f69697;\x20padding:\x200.75rem;\x20border-radius:\x200.5rem;\x20margin-bottom:\x200.5rem;'];_0x52e2=function(){return _0x2f12d2;};return _0x52e2();}queryExamples['length']>=0x1&&queryExamples[_0x26dae0(0x114)](_0x5a6611=>{const _0x396b8e=_0x26dae0;_0x5a6611[_0x396b8e(0x138)]('click',_0x38c574=>{const _0x3dbc82=_0x396b8e;userInput['value']=_0x5a6611['dataset'][_0x3dbc82(0x125)],sendMessage();});});;sendButton[_0x26dae0(0x138)](_0x26dae0(0x12b),sendMessage),userInput[_0x26dae0(0x138)](_0x26dae0(0xfd),_0x5044a8=>{const _0x3f832e=_0x26dae0;if(_0x5044a8[_0x3f832e(0x12a)]===_0x3f832e(0x146))sendMessage();});