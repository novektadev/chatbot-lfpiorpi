const _0x1a3e53=_0xde9e;(function(_0x357e03,_0x1e4c90){const _0x3453a5=_0xde9e,_0x37ca37=_0x357e03();while(!![]){try{const _0x1bef10=parseInt(_0x3453a5(0x1d9))/0x1*(parseInt(_0x3453a5(0x1b8))/0x2)+-parseInt(_0x3453a5(0x196))/0x3+-parseInt(_0x3453a5(0x19e))/0x4*(parseInt(_0x3453a5(0x194))/0x5)+-parseInt(_0x3453a5(0x1ad))/0x6*(-parseInt(_0x3453a5(0x1aa))/0x7)+-parseInt(_0x3453a5(0x1d3))/0x8*(-parseInt(_0x3453a5(0x1c6))/0x9)+-parseInt(_0x3453a5(0x1e7))/0xa+-parseInt(_0x3453a5(0x1ba))/0xb*(parseInt(_0x3453a5(0x1f4))/0xc);if(_0x1bef10===_0x1e4c90)break;else _0x37ca37['push'](_0x37ca37['shift']());}catch(_0x58cf07){_0x37ca37['push'](_0x37ca37['shift']());}}}(_0x212d,0x669d9));import{bagOfWords,documentAsTree,stopWords,contextModel,loadBagOfWords,loadDocumentAsTree,loadStopWords,loadContextModel}from'./readModelData.min.js';async function displayDocumentTree(){const _0x3b91a6=_0xde9e;!documentAsTree&&(console[_0x3b91a6(0x193)](_0x3b91a6(0x1e1)),await loadDocumentAsTree());if(documentAsTree)for(const [_0x5157e9,_0x46fa87]of Object[_0x3b91a6(0x1f3)](documentAsTree)){const _0x37020a=_0x5157e9,_0x130ed2=_0x46fa87;if(_0x130ed2){const _0x4f5019=_0x130ed2['type'],_0x4de17a=_0x130ed2['text'];}}else console[_0x3b91a6(0x1db)](_0x3b91a6(0x1da));}function _0x212d(){const _0x4663f4=['log','35nWSIUL','.example-btn','30546PnbVLU','push','end','NFD','keypress','replace','dataset','warning','93068LnAILY','length','America/Mazatlan','trim','<p><i>','query','</b>\x20','background-color:\x20#f69697;\x20padding:\x200.75rem;\x20border-radius:\x200.5rem;\x20margin-bottom:\x200.5rem;','filter','</h4>\x0a','}<br>\x0a','background-color:\x20#f8ed62;\x20padding:\x200.75rem;\x20border-radius:\x200.5rem;\x20margin-bottom:\x200.5rem;','217tDJbPG','entryCount','innerHTML','49182gGaRmB','slice','numeric','Context\x20model\x20not\x20yet\x20loaded,\x20loading\x20now...','div','<h3><b>Capitulo\x20','maxChunks','<p\x20style=\x22padding-left:40px;\x22><b>','isArray','maxScore','reduce','104YRiTiy','message-bubble\x20bot-message','3223UhSSzO','\x22</strong>,\x20no\x20esta\x20relacionada\x20con\x20los\x20alcances\x20de\x20este\x20chatbot','accion','pathName','<h4><b>Seccion\x20','<br>','normalize','style','numChunks','Enter','bot','value','9XcegkL','scrollIntoView','createElement','<p><strong>usuario:</strong>\x20','className','</b>:\x20','click','key','score','\x20</h3>\x0a','split','toLocaleTimeString','chunksIds','3882776HXqkUH','</p>\x0a','en-US',')</p>\x0a','forEach','background-color:\x20#e6f7ff;\x20padding:\x200.75rem;\x20border-radius:\x200.5rem;\x20margin-bottom:\x200.5rem;','13721ZGyhjt','documentAsTree\x20is\x20not\x20available.','warn','Para\x20darte\x20mejores\x20resultados,\x20necesito\x20más\x20detalles\x20en\x20tu\x20pregunta.\x20Por\x20favor,\x20añade\x20un\x20poco\x20más\x20de\x20contexto','smooth','<p><strong>Agente:</strong>','addEventListener','has','document\x20tree\x20not\x20yet\x20loaded,\x20loading\x20now...','querySelectorAll','sendButton','}</i></p>\x0a','error','appendChild','441630azfSXL','chunkId','typingIndicator','textContent','message-bubble\x20user-message',':</p>','totalScore','getElementById','keys','</b>\x20-\x20','weightedAvg','toLowerCase','entries','33396KTdTEt','</b>\x20\x0a'];_0x212d=function(){return _0x4663f4;};return _0x212d();}const calculateSimilarity=(_0x4732e8,_0x1f9775)=>{const _0x4621ae=_0xde9e,_0x3ce981=_0x4732e8[_0x4621ae(0x1f2)]()[_0x4621ae(0x1d0)](/\s+/),_0x5c2bfd=_0x3ce981[_0x4621ae(0x19f)];if(_0x5c2bfd===0x0)return 0x0;const _0x40adac=_0x3ce981[_0x4621ae(0x1b7)]((_0x24277a,_0x1401ec)=>_0x24277a+(_0x1f9775[_0x1401ec]||0x0),0x0);return _0x40adac/_0x5c2bfd;};async function evaluateContext(_0x5dd102){const _0x1a5890=_0xde9e;let _0x92365=[];const _0x38c833=(_0x59d6d4,_0x5c77b3)=>{const _0x4629cd=_0xde9e,_0x171bac=_0x59d6d4['length'];if(_0x171bac===0x0)return 0x0;const _0x22b82f=_0x59d6d4[_0x4629cd(0x1b7)]((_0x4d8bd1,_0x59a2b0)=>_0x4d8bd1+(_0x5c77b3[_0x59a2b0]||0x0),0x0);return _0x22b82f/_0x171bac;};!contextModel&&(console[_0x1a5890(0x193)](_0x1a5890(0x1b0)),await loadContextModel());if(contextModel)for(const _0x23159e of contextModel){if(_0x23159e&&Array[_0x1a5890(0x1b5)](_0x23159e['textChunks']))for(const _0x386ec7 of _0x23159e['textChunks']){const _0x368242=_0x386ec7[_0x1a5890(0x1e8)],_0x36b196=_0x386ec7['chunk'],_0x4d05da=_0x38c833(_0x5dd102,_0x36b196);if(_0x4d05da>0x0){const _0x2a8358={'pathName':_0x23159e[_0x1a5890(0x1bd)],'chunkId':_0x368242,'score':_0x4d05da};_0x92365['push'](_0x2a8358);}}}else console['warn'](_0x1a5890(0x1da));return _0x92365;}async function getVectorToSearch(_0x2cd795){const _0x59f717=_0xde9e,_0x56485e=/[\u0300-\u036f]/g,_0x2cba96=/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,_0x180bad=/\s+/g,_0x5dcfab=_0x2cd795[_0x59f717(0x1f2)]()[_0x59f717(0x1c0)](_0x59f717(0x199))['replace'](_0x56485e,''),_0x590610=_0x5dcfab[_0x59f717(0x1f2)]()[_0x59f717(0x19b)](_0x2cba96,'\x20'),_0x57594b=_0x590610['replace'](_0x180bad,'\x20')[_0x59f717(0x1a1)](),_0x317e3c=_0x57594b[_0x59f717(0x1d0)]('\x20')[_0x59f717(0x1a6)](Boolean);!stopWords&&await loadStopWords();if(stopWords){let _0x28cb33=[];const _0x48e9ff=new Set(stopWords);_0x28cb33['push'](..._0x317e3c[_0x59f717(0x1a6)](_0x341421=>!_0x48e9ff[_0x59f717(0x1e0)](_0x341421)));if(_0x28cb33[_0x59f717(0x19f)]>=0x1){!bagOfWords&&await loadBagOfWords();if(bagOfWords){let _0x19ec1c=[];const _0xae0ac1=Object[_0x59f717(0x1ef)](bagOfWords),_0x57d4c5=new Set(_0xae0ac1);return _0x19ec1c[_0x59f717(0x197)](..._0x28cb33[_0x59f717(0x1a6)](_0x4783cf=>_0x57d4c5[_0x59f717(0x1e0)](_0x4783cf))),_0x19ec1c[_0x59f717(0x19f)]>=0x1?_0x19ec1c:null;}}}}async function getRelatedLeafs(_0xfcdf82,_0x326db4){const _0x1dcd62=_0xde9e;let _0x419a3b=null;const _0x3be8b3=await evaluateContext(_0xfcdf82);if(_0x3be8b3){const _0x46c437={};for(const _0x1c8eef of _0x3be8b3){const _0xb58389=_0x1c8eef[_0x1dcd62(0x1bd)];!_0x46c437[_0xb58389]&&(_0x46c437[_0xb58389]={'chunksIds':new Set(),'totalScore':0x0,'entryCount':0x0,'maxScore':-Infinity});const _0x29670b=_0x46c437[_0xb58389];!_0x29670b[_0x1dcd62(0x1d2)]['has'](_0x1c8eef['chunkId'])&&(_0x29670b['chunksIds']['add'](_0x1c8eef['chunkId']),_0x29670b[_0x1dcd62(0x1ed)]+=_0x1c8eef['score'],_0x29670b[_0x1dcd62(0x1ab)]++,_0x1c8eef['score']>_0x29670b[_0x1dcd62(0x1b6)]&&(_0x29670b['maxScore']=_0x1c8eef[_0x1dcd62(0x1ce)]));}const _0x354f8d=Object[_0x1dcd62(0x1f3)](_0x46c437)['map'](([_0x578741,_0x21acce])=>{const _0x1034f5=_0x1dcd62,_0x1609ad=_0x21acce[_0x1034f5(0x1ed)]/_0x21acce[_0x1034f5(0x1ab)],_0x4e68a5=_0x21acce[_0x1034f5(0x1b6)],_0x42ece8=(0x2*_0x4e68a5+_0x1609ad)/0x3;return{'pathName':_0x578741,'numChunks':_0x21acce[_0x1034f5(0x1d2)]['size'],'avgScore':_0x1609ad,'maxScore':_0x4e68a5,'weightedAvg':_0x42ece8};});if(_0x354f8d){if(_0x354f8d[_0x1dcd62(0x19f)]>=0x1)return _0x354f8d['sort']((_0x3c662c,_0x35d1a0)=>{const _0x2bffa3=_0x1dcd62;if(_0x35d1a0[_0x2bffa3(0x1f1)]!==_0x3c662c[_0x2bffa3(0x1f1)])return _0x35d1a0[_0x2bffa3(0x1f1)]-_0x3c662c[_0x2bffa3(0x1f1)];return _0x35d1a0[_0x2bffa3(0x1c2)]-_0x3c662c[_0x2bffa3(0x1c2)];}),_0x419a3b=_0x354f8d[_0x1dcd62(0x1ae)](0x0,_0x326db4),_0x419a3b;}else return null;}else return null;}async function getResponsePaths(_0x104bc6){const _0x5cdc1d=_0xde9e,_0x1a146f=[];let _0x43b49d=0x1;for(const _0x130c97 of _0x104bc6){let _0x1490ba=Array(0x8)['fill']('');const _0x4a6221=_0x130c97[_0x5cdc1d(0x1bd)][_0x5cdc1d(0x1d0)]('/');if(_0x4a6221){for(let _0x276e0c=0x1;_0x276e0c<_0x4a6221[_0x5cdc1d(0x19f)];_0x276e0c++){_0x276e0c>0x1?_0x1490ba[_0x276e0c-0x1]=_0x1490ba[_0x276e0c-0x2]+'/'+_0x4a6221[_0x276e0c]:_0x1490ba[_0x276e0c-0x1]='/'+_0x4a6221[_0x276e0c];}_0x1a146f[_0x5cdc1d(0x197)](_0x1490ba);}_0x43b49d+=0x1;}return _0x1a146f;}async function getHTMLResponse(_0x37cbdb){const _0x4eeada=_0xde9e;if(_0x37cbdb[_0x4eeada(0x19f)]>=0x1){let _0x3c0887='';for(let _0x272acb=0x0;_0x272acb<_0x37cbdb[_0x4eeada(0x19f)];_0x272acb++){for(let _0x5535bb=0x1;_0x5535bb<_0x37cbdb[_0x272acb][_0x4eeada(0x19f)];_0x5535bb++){const _0x426909=_0x37cbdb[_0x272acb][_0x5535bb];if(_0x426909!==''){let _0x402d56='',_0xdfcc50='';const _0x451adc=_0x426909['split']('/'),_0x180cb1=_0x451adc['at'](-0x1);!documentAsTree&&await loadDocumentAsTree();documentAsTree&&(_0x426909 in documentAsTree&&(_0xdfcc50=documentAsTree[_0x426909]['text']));if(_0x180cb1!=='accion'&&_0x180cb1!=='U')switch(_0x5535bb){case 0x1:_0x402d56=_0x4eeada(0x1b2)+_0x180cb1+_0x4eeada(0x1f0)+_0xdfcc50+_0x4eeada(0x1cf);break;case 0x2:_0x402d56=_0x4eeada(0x1be)+_0x180cb1+_0x4eeada(0x1f0)+_0xdfcc50+_0x4eeada(0x1a7);break;case 0x3:_0x402d56='<p><b>Articulo\x20'+_0x180cb1+_0x4eeada(0x1cb)+_0xdfcc50+_0x4eeada(0x1d4);break;case 0x4:_0x402d56='<p\x20style=\x22padding-left:20px;\x22><b>'+_0x180cb1+_0x4eeada(0x1f0)+_0xdfcc50+_0x4eeada(0x1d4);break;case 0x5:_0x402d56=_0x4eeada(0x1b4)+_0x180cb1+_0x4eeada(0x1a4)+_0xdfcc50+_0x4eeada(0x1d6);break;case 0x6:_0x402d56='<p\x20style=\x22padding-left:60px;\x22><b>'+_0x180cb1+_0x4eeada(0x192)+_0xdfcc50+_0x4eeada(0x1d6);break;default:_0x402d56=_0xdfcc50+_0x4eeada(0x1a8);break;}else _0x180cb1===_0x4eeada(0x1bc)&&(_0x402d56=_0x4eeada(0x1a2)+_0xdfcc50+_0x4eeada(0x1e4)),_0x180cb1=='U'&&(_0x402d56='\x0a');_0x3c0887+=_0x402d56;}}_0x3c0887+=_0x4eeada(0x1bf);}return _0x3c0887;}return null;}async function addMessageToChat(_0x510642,_0x52a4d6){const _0x40d9c5=_0xde9e;let _0x76e548='';const _0x2ef40e=document[_0x40d9c5(0x1c8)](_0x40d9c5(0x1b1));_0x52a4d6==='user'&&(_0x76e548=_0x40d9c5(0x1c9)+_0x510642+'</p>',_0x2ef40e[_0x40d9c5(0x1ca)]=_0x40d9c5(0x1eb),_0x2ef40e[_0x40d9c5(0x1c1)]='background-color:\x20#dddddd;\x20padding:\x200.75rem;\x20border-radius:\x200.5rem;\x20margin-bottom:\x200.5rem;'),_0x52a4d6===_0x40d9c5(0x1c4)&&(_0x76e548='<p><strong>Agente:</strong>\x20\x20Con\x20fundamento\x20en:</p>\x0a'+_0x510642,_0x2ef40e[_0x40d9c5(0x1ca)]=_0x40d9c5(0x1b9),_0x2ef40e[_0x40d9c5(0x1c1)]=_0x40d9c5(0x1d8)),_0x52a4d6===_0x40d9c5(0x19d)&&(_0x76e548=_0x40d9c5(0x1de)+_0x510642+_0x40d9c5(0x1ec),_0x2ef40e[_0x40d9c5(0x1ca)]=_0x40d9c5(0x1b9),_0x2ef40e[_0x40d9c5(0x1c1)]=_0x40d9c5(0x1a9)),_0x52a4d6==='error'&&(_0x76e548='<p><strong>Agente:</strong>'+_0x510642+_0x40d9c5(0x1ec),_0x2ef40e['className']=_0x40d9c5(0x1b9),_0x2ef40e[_0x40d9c5(0x1c1)]=_0x40d9c5(0x1a5)),_0x2ef40e[_0x40d9c5(0x1ac)]=_0x76e548,chatContainer[_0x40d9c5(0x1e6)](_0x2ef40e),_0x2ef40e[_0x40d9c5(0x1c7)]({'behavior':_0x40d9c5(0x1dd),'block':_0x40d9c5(0x198)});}async function sendMessage(){const _0x2eb655=_0xde9e,_0x28de52=userInput[_0x2eb655(0x1c5)][_0x2eb655(0x1a1)]();if(_0x28de52!==''){const _0x58e835=await getVectorToSearch(_0x28de52);if(_0x58e835!==null){if(_0x58e835[_0x2eb655(0x19f)]>=0x3){addMessageToChat(_0x28de52,'user');const _0x465f17=document[_0x2eb655(0x1ee)](_0x2eb655(0x1b3)),_0x10abdd=await getRelatedLeafs(_0x58e835,_0x465f17['value']),_0x594ab0=await getResponsePaths(_0x10abdd),_0x332b32=await getHTMLResponse(_0x594ab0);addMessageToChat(_0x332b32,_0x2eb655(0x1c4));}else addMessageToChat(_0x2eb655(0x1dc),_0x2eb655(0x19d));}else addMessageToChat('Su\x20consula\x20\x22<strong>'+_0x28de52+_0x2eb655(0x1bb),_0x2eb655(0x1e5));}}const currentTimeSpan=document[_0x1a3e53(0x1ee)]('currentTime');function updateLocalTime(){const _0x54f0d4=_0x1a3e53,_0x210b5e={'timeZone':_0x54f0d4(0x1a0),'hour':_0x54f0d4(0x1af),'minute':_0x54f0d4(0x1af),'second':_0x54f0d4(0x1af),'hour12':!![]},_0x2e6ce6=new Date()[_0x54f0d4(0x1d1)](_0x54f0d4(0x1d5),_0x210b5e);currentTimeSpan[_0x54f0d4(0x1ea)]=_0x2e6ce6;}updateLocalTime(),setInterval(updateLocalTime,0x3e8);const chatContainer=document['getElementById']('chatContainer'),userInput=document[_0x1a3e53(0x1ee)]('userInput'),sendButton=document[_0x1a3e53(0x1ee)](_0x1a3e53(0x1e3)),typingIndicator=document[_0x1a3e53(0x1ee)](_0x1a3e53(0x1e9)),maxChunksInput=document[_0x1a3e53(0x1ee)](_0x1a3e53(0x1b3)),queryExamples=document[_0x1a3e53(0x1e2)](_0x1a3e53(0x195));queryExamples[_0x1a3e53(0x19f)]>=0x1&&queryExamples[_0x1a3e53(0x1d7)](_0x25f172=>{const _0x231616=_0x1a3e53;_0x25f172['addEventListener'](_0x231616(0x1cc),_0x5dbcaf=>{const _0x48ac16=_0x231616;userInput[_0x48ac16(0x1c5)]=_0x25f172[_0x48ac16(0x19c)][_0x48ac16(0x1a3)],sendMessage();});});;function _0xde9e(_0x20edcd,_0x2d5d5c){const _0x212d8a=_0x212d();return _0xde9e=function(_0xde9ed,_0x32818e){_0xde9ed=_0xde9ed-0x192;let _0xdb1fb6=_0x212d8a[_0xde9ed];return _0xdb1fb6;},_0xde9e(_0x20edcd,_0x2d5d5c);}sendButton[_0x1a3e53(0x1df)]('click',sendMessage),userInput[_0x1a3e53(0x1df)](_0x1a3e53(0x19a),_0x939cb8=>{const _0x5c5839=_0x1a3e53;if(_0x939cb8[_0x5c5839(0x1cd)]===_0x5c5839(0x1c3))sendMessage();});
